// ==UserScript==
// @name               Character Replace
// @name:zh-CN         å­—ç¬¦æ›¿æ¢
// @namespace          yueby.character-replace
// @version            0.1.0
// @author             Yueby
// @description        A userscript for replacing characters on web pages
// @description:zh-CN  ç½‘é¡µå­—ç¬¦æ›¿æ¢è„šæœ¬
// @icon               https://vitejs.dev/logo.svg
// @match              *://*/*
// @grant              GM_registerMenuCommand
// ==/UserScript==

(function () {
	'use strict';

	var t=(()=>"undefined"!=typeof GM_registerMenuCommand?GM_registerMenuCommand:void 0)();class e{charMap;config;replaceCount=0;constructor(t,e){this.charMap=t,this.config={targetTags:e?.targetTags??["*"],excludeTags:e?.excludeTags??["SCRIPT","STYLE"]};}replaceText(t){let e=t;for(const[n,s]of Object.entries(this.charMap))e.includes(n)&&(e=e.replace(RegExp(n,"g"),s),this.replaceCount++);return e}shouldProcessNode(t){if(t.nodeType!==Node.TEXT_NODE)return  false;const e=t.parentElement;if(!e)return  false;const n=e.tagName;return !this.config.excludeTags.includes(n)&&(!!this.config.targetTags.includes("*")||this.config.targetTags.includes(n))}processTextNode(t){const e=t.textContent??"";if(!e)return;const n=this.replaceText(e);n!==e&&(t.textContent=n);}setValueAndTriggerEvents(t,e){const n=t instanceof HTMLInputElement?HTMLInputElement.prototype:HTMLTextAreaElement.prototype,s=Object.getOwnPropertyDescriptor(n,"value")?.set;s?.call(t,e),t.dispatchEvent(new InputEvent("input",{bubbles:true,cancelable:true})),t.dispatchEvent(new Event("change",{bubbles:true})),t.dispatchEvent(new Event("blur",{bubbles:true}));}replaceInInputElements(t){t.querySelectorAll('input[type="text"], input:not([type]), input[type="search"], input[type="url"], input[type="email"]').forEach(t=>{const e=t,n=e.value;if(n){const t=this.replaceText(n);t!==n&&this.setValueAndTriggerEvents(e,t);}});}replaceInTextareas(t){t.querySelectorAll("textarea").forEach(t=>{const e=t.value;if(e){const n=this.replaceText(e);n!==e&&this.setValueAndTriggerEvents(t,n);}});}replaceInContentEditable(t){t.querySelectorAll('[contenteditable="true"]').forEach(t=>{this.replaceInElement(t);});}replaceInElement(t){this.replaceCount=0;const e=document.createTreeWalker(t,NodeFilter.SHOW_TEXT,{acceptNode:t=>this.shouldProcessNode(t)?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_REJECT}),n=[];let s=e.nextNode();for(;s;)n.push(s),s=e.nextNode();return n.forEach(t=>this.processTextNode(t)),this.replaceInInputElements(t),this.replaceInTextareas(t),this.replaceInContentEditable(t),this.replaceCount}replaceInDocument(){return this.replaceInElement(document.body)}}const n={"ï¼ˆ":"(","ï¼‰":")","ã€":"[","ã€‘":"]","ï½›":"{","ï½":"}","ã€Š":"<","ã€‹":">","ã€Œ":"(","ã€":")","ã€":"(","ã€":")","ã€ˆ":"<","ã€‰":">","ã€”":"[","ã€•":"]","ï½Ÿ":"(","ï½ ":")","ï¼»":"[","ï¼½":"]"};class s{static info(t,...e){}static warn(t,...e){}static error(t,...e){}static success(t,...e){}}class r extends e{constructor(t){super(n,t);}replaceInDocument(){s.info("å¼€å§‹æ›¿æ¢ä¸­æ—¥æ–‡æ‹¬å·...");const t=super.replaceInDocument();return 0===t?s.info("æœªå‘ç°éœ€è¦æ›¿æ¢çš„æ‹¬å·"):s.success(`æ›¿æ¢å®Œæˆï¼å…±æ›¿æ¢ ${t} ä¸ªæ‹¬å·`),t}static create(t){return new r(t)}}const c={"ğ’¶":"a","ğ’·":"b","ğ’¸":"c","ğ’¹":"d","ğ‘’":"e","ğ’»":"f","ğ‘”":"g","ğ’½":"h","ğ’¾":"i","ğ’¿":"j","ğ“€":"k","ğ“":"l","ğ“‚":"m","ğ“ƒ":"n","ğ‘œ":"o","ğ“…":"p","ğ“†":"q","ğ“‡":"r","ğ“ˆ":"s","ğ“‰":"t","ğ“Š":"u","ğ“‹":"v","ğ“Œ":"w","ğ“":"x","ğ“":"y","ğ“":"z","ğ’œ":"A","ğµ":"B","ğ’":"C","ğ’Ÿ":"D","ğ¸":"E","ğ¹":"F","ğ’¢":"G","ğ»":"H","ğ¼":"I","ğ’¥":"J","ğ’¦":"K","ğ¿":"L","ğ‘€":"M","ğ’©":"N","ğ’ª":"O","ğ’«":"P","ğ’¬":"Q","ğ‘…":"R","ğ’®":"S","ğ’¯":"T","ğ’°":"U","ğ’±":"V","ğ’²":"W","ğ’³":"X","ğ’´":"Y","ğ’µ":"Z","ğ“ª":"a","ğ“«":"b","ğ“¬":"c","ğ“­":"d","ğ“®":"e","ğ“¯":"f","ğ“°":"g","ğ“±":"h","ğ“²":"i","ğ“³":"j","ğ“´":"k","ğ“µ":"l","ğ“¶":"m","ğ“·":"n","ğ“¸":"o","ğ“¹":"p","ğ“º":"q","ğ“»":"r","ğ“¼":"s","ğ“½":"t","ğ“¾":"u","ğ“¿":"v","ğ”€":"w","ğ”":"x","ğ”‚":"y","ğ”ƒ":"z","ğ“":"A","ğ“‘":"B","ğ“’":"C","ğ““":"D","ğ“”":"E","ğ“•":"F","ğ“–":"G","ğ“—":"H","ğ“˜":"I","ğ“™":"J","ğ“š":"K","ğ“›":"L","ğ“œ":"M","ğ“":"N","ğ“":"O","ğ“Ÿ":"P","ğ“ ":"Q","ğ“¡":"R","ğ“¢":"S","ğ“£":"T","ğ“¤":"U","ğ“¥":"V","ğ“¦":"W","ğ“§":"X","ğ“¨":"Y","ğ“©":"Z","ğ”":"a","ğ”Ÿ":"b","ğ” ":"c","ğ”¡":"d","ğ”¢":"e","ğ”£":"f","ğ”¤":"g","ğ”¥":"h","ğ”¦":"i","ğ”§":"j","ğ”¨":"k","ğ”©":"l","ğ”ª":"m","ğ”«":"n","ğ”¬":"o","ğ”­":"p","ğ”®":"q","ğ”¯":"r","ğ”°":"s","ğ”±":"t","ğ”²":"u","ğ”³":"v","ğ”´":"w","ğ”µ":"x","ğ”¶":"y","ğ”·":"z","ğ”„":"A","ğ”…":"B","â„­":"C","ğ”‡":"D","ğ”ˆ":"E","ğ”‰":"F","ğ”Š":"G","â„Œ":"H","â„‘":"I","ğ”":"J","ğ”":"K","ğ”":"L","ğ”":"M","ğ”‘":"N","ğ”’":"O","ğ”“":"P","ğ””":"Q","â„œ":"R","ğ”–":"S","ğ”—":"T","ğ”˜":"U","ğ”™":"V","ğ”š":"W","ğ”›":"X","ğ”œ":"Y","â„¨":"Z","ğ–†":"a","ğ–‡":"b","ğ–ˆ":"c","ğ–‰":"d","ğ–Š":"e","ğ–‹":"f","ğ–Œ":"g","ğ–":"h","ğ–":"i","ğ–":"j","ğ–":"k","ğ–‘":"l","ğ–’":"m","ğ–“":"n","ğ–”":"o","ğ–•":"p","ğ––":"q","ğ–—":"r","ğ–˜":"s","ğ–™":"t","ğ–š":"u","ğ–›":"v","ğ–œ":"w","ğ–":"x","ğ–":"y","ğ–Ÿ":"z","ğ•¬":"A","ğ•­":"B","ğ•®":"C","ğ•¯":"D","ğ•°":"E","ğ•±":"F","ğ•²":"G","ğ•³":"H","ğ•´":"I","ğ•µ":"J","ğ•¶":"K","ğ•·":"L","ğ•¸":"M","ğ•¹":"N","ğ•º":"O","ğ•»":"P","ğ•¼":"Q","ğ•½":"R","ğ•¾":"S","ğ•¿":"T","ğ–€":"U","ğ–":"V","ğ–‚":"W","ğ–ƒ":"X","ğ–„":"Y","ğ–…":"Z","ğ•’":"a","ğ•“":"b","ğ•”":"c","ğ••":"d","ğ•–":"e","ğ•—":"f","ğ•˜":"g","ğ•™":"h","ğ•š":"i","ğ•›":"j","ğ•œ":"k","ğ•":"l","ğ•":"m","ğ•Ÿ":"n","ğ• ":"o","ğ•¡":"p","ğ•¢":"q","ğ•£":"r","ğ•¤":"s","ğ•¥":"t","ğ•¦":"u","ğ•§":"v","ğ•¨":"w","ğ•©":"x","ğ•ª":"y","ğ•«":"z","ğ”¸":"A","ğ”¹":"B","â„‚":"C","ğ”»":"D","ğ”¼":"E","ğ”½":"F","ğ”¾":"G","â„":"H","ğ•€":"I","ğ•":"J","ğ•‚":"K","ğ•ƒ":"L","ğ•„":"M","â„•":"N","ğ•†":"O","â„™":"P","â„š":"Q","â„":"R","ğ•Š":"S","ğ•‹":"T","ğ•Œ":"U","ğ•":"V","ğ•":"W","ğ•":"X","ğ•":"Y","â„¤":"Z","ğŸ˜":"0","ğŸ™":"1","ğŸš":"2","ğŸ›":"3","ğŸœ":"4","ğŸ":"5","ğŸ":"6","ğŸŸ":"7","ğŸ ":"8","ğŸ¡":"9","ğ–º":"a","ğ–»":"b","ğ–¼":"c","ğ–½":"d","ğ–¾":"e","ğ–¿":"f","ğ—€":"g","ğ—":"h","ğ—‚":"i","ğ—ƒ":"j","ğ—„":"k","ğ—…":"l","ğ—†":"m","ğ—‡":"n","ğ—ˆ":"o","ğ—‰":"p","ğ—Š":"q","ğ—‹":"r","ğ—Œ":"s","ğ—":"t","ğ—":"u","ğ—":"v","ğ—":"w","ğ—‘":"x","ğ—’":"y","ğ—“":"z","ğ– ":"A","ğ–¡":"B","ğ–¢":"C","ğ–£":"D","ğ–¤":"E","ğ–¥":"F","ğ–¦":"G","ğ–§":"H","ğ–¨":"I","ğ–©":"J","ğ–ª":"K","ğ–«":"L","ğ–¬":"M","ğ–­":"N","ğ–®":"O","ğ–¯":"P","ğ–°":"Q","ğ–±":"R","ğ–²":"S","ğ–³":"T","ğ–´":"U","ğ–µ":"V","ğ–¶":"W","ğ–·":"X","ğ–¸":"Y","ğ–¹":"Z","ğ—®":"a","ğ—¯":"b","ğ—°":"c","ğ—±":"d","ğ—²":"e","ğ—³":"f","ğ—´":"g","ğ—µ":"h","ğ—¶":"i","ğ—·":"j","ğ—¸":"k","ğ—¹":"l","ğ—º":"m","ğ—»":"n","ğ—¼":"o","ğ—½":"p","ğ—¾":"q","ğ—¿":"r","ğ˜€":"s","ğ˜":"t","ğ˜‚":"u","ğ˜ƒ":"v","ğ˜„":"w","ğ˜…":"x","ğ˜†":"y","ğ˜‡":"z","ğ—”":"A","ğ—•":"B","ğ—–":"C","ğ——":"D","ğ—˜":"E","ğ—™":"F","ğ—š":"G","ğ—›":"H","ğ—œ":"I","ğ—":"J","ğ—":"K","ğ—Ÿ":"L","ğ— ":"M","ğ—¡":"N","ğ—¢":"O","ğ—£":"P","ğ—¤":"Q","ğ—¥":"R","ğ—¦":"S","ğ—§":"T","ğ—¨":"U","ğ—©":"V","ğ—ª":"W","ğ—«":"X","ğ—¬":"Y","ğ—­":"Z","ğ˜¢":"a","ğ˜£":"b","ğ˜¤":"c","ğ˜¥":"d","ğ˜¦":"e","ğ˜§":"f","ğ˜¨":"g","ğ˜©":"h","ğ˜ª":"i","ğ˜«":"j","ğ˜¬":"k","ğ˜­":"l","ğ˜®":"m","ğ˜¯":"n","ğ˜°":"o","ğ˜±":"p","ğ˜²":"q","ğ˜³":"r","ğ˜´":"s","ğ˜µ":"t","ğ˜¶":"u","ğ˜·":"v","ğ˜¸":"w","ğ˜¹":"x","ğ˜º":"y","ğ˜»":"z","ğ˜ˆ":"A","ğ˜‰":"B","ğ˜Š":"C","ğ˜‹":"D","ğ˜Œ":"E","ğ˜":"F","ğ˜":"G","ğ˜":"H","ğ˜":"I","ğ˜‘":"J","ğ˜’":"K","ğ˜“":"L","ğ˜”":"M","ğ˜•":"N","ğ˜–":"O","ğ˜—":"P","ğ˜˜":"Q","ğ˜™":"R","ğ˜š":"S","ğ˜›":"T","ğ˜œ":"U","ğ˜":"V","ğ˜":"W","ğ˜Ÿ":"X","ğ˜ ":"Y","ğ˜¡":"Z","ğ™–":"a","ğ™—":"b","ğ™˜":"c","ğ™™":"d","ğ™š":"e","ğ™›":"f","ğ™œ":"g","ğ™":"h","ğ™":"i","ğ™Ÿ":"j","ğ™ ":"k","ğ™¡":"l","ğ™¢":"m","ğ™£":"n","ğ™¤":"o","ğ™¥":"p","ğ™¦":"q","ğ™§":"r","ğ™¨":"s","ğ™©":"t","ğ™ª":"u","ğ™«":"v","ğ™¬":"w","ğ™­":"x","ğ™®":"y","ğ™¯":"z","ğ˜¼":"A","ğ˜½":"B","ğ˜¾":"C","ğ˜¿":"D","ğ™€":"E","ğ™":"F","ğ™‚":"G","ğ™ƒ":"H","ğ™„":"I","ğ™…":"J","ğ™†":"K","ğ™‡":"L","ğ™ˆ":"M","ğ™‰":"N","ğ™Š":"O","ğ™‹":"P","ğ™Œ":"Q","ğ™":"R","ğ™":"S","ğ™":"T","ğ™":"U","ğ™‘":"V","ğ™’":"W","ğ™“":"X","ğ™”":"Y","ğ™•":"Z","ğŸ¢":"0","ğŸ£":"1","ğŸ¤":"2","ğŸ¥":"3","ğŸ¦":"4","ğŸ§":"5","ğŸ¨":"6","ğŸ©":"7","ğŸª":"8","ğŸ«":"9","ğŸ¬":"0","ğŸ­":"1","ğŸ®":"2","ğŸ¯":"3","ğŸ°":"4","ğŸ±":"5","ğŸ²":"6","ğŸ³":"7","ğŸ´":"8","ğŸµ":"9","ğšŠ":"a","ğš‹":"b","ğšŒ":"c","ğš":"d","ğš":"e","ğš":"f","ğš":"g","ğš‘":"h","ğš’":"i","ğš“":"j","ğš”":"k","ğš•":"l","ğš–":"m","ğš—":"n","ğš˜":"o","ğš™":"p","ğšš":"q","ğš›":"r","ğšœ":"s","ğš":"t","ğš":"u","ğšŸ":"v","ğš ":"w","ğš¡":"x","ğš¢":"y","ğš£":"z","ğ™°":"A","ğ™±":"B","ğ™²":"C","ğ™³":"D","ğ™´":"E","ğ™µ":"F","ğ™¶":"G","ğ™·":"H","ğ™¸":"I","ğ™¹":"J","ğ™º":"K","ğ™»":"L","ğ™¼":"M","ğ™½":"N","ğ™¾":"O","ğ™¿":"P","ğš€":"Q","ğš":"R","ğš‚":"S","ğšƒ":"T","ğš„":"U","ğš…":"V","ğš†":"W","ğš‡":"X","ğšˆ":"Y","ğš‰":"Z","ğŸ¶":"0","ğŸ·":"1","ğŸ¸":"2","ğŸ¹":"3","ğŸº":"4","ğŸ»":"5","ğŸ¼":"6","ğŸ½":"7","ğŸ¾":"8","ğŸ¿":"9","ğ‘":"a","ğ‘":"b","ğ‘":"c","ğ‘‘":"d","ğ‘’":"e","ğ‘“":"f","ğ‘”":"g","ğ˜©":"h","ğ‘–":"i","ğ‘—":"j","ğ‘˜":"k","ğ‘™":"l","ğ‘š":"m","ğ‘›":"n","ğ‘œ":"o","ğ‘":"p","ğ‘":"q","ğ‘Ÿ":"r","ğ‘ ":"s","ğ‘¡":"t","ğ‘¢":"u","ğ‘£":"v","ğ‘¤":"w","ğ‘¥":"x","ğ‘¦":"y","ğ‘§":"z","ğ´":"A","ğµ":"B","ğ¶":"C","ğ·":"D","ğ¸":"E","ğ¹":"F","ğº":"G","ğ»":"H","ğ¼":"I","ğ½":"J","ğ¾":"K","ğ¿":"L","ğ‘€":"M","ğ‘":"N","ğ‘‚":"O","ğ‘ƒ":"P","ğ‘„":"Q","ğ‘…":"R","ğ‘†":"S","ğ‘‡":"T","ğ‘ˆ":"U","ğ‘‰":"V","ğ‘Š":"W","ğ‘‹":"X","ğ‘Œ":"Y","ğ‘":"Z","ğš":"a","ğ›":"b","ğœ":"c","ğ":"d","ğ":"e","ğŸ":"f","ğ ":"g","ğ¡":"h","ğ¢":"i","ğ£":"j","ğ¤":"k","ğ¥":"l","ğ¦":"m","ğ§":"n","ğ¨":"o","ğ©":"p","ğª":"q","ğ«":"r","ğ¬":"s","ğ­":"t","ğ®":"u","ğ¯":"v","ğ°":"w","ğ±":"x","ğ²":"y","ğ³":"z","ğ€":"A","ğ":"B","ğ‚":"C","ğƒ":"D","ğ„":"E","ğ…":"F","ğ†":"G","ğ‡":"H","ğˆ":"I","ğ‰":"J","ğŠ":"K","ğ‹":"L","ğŒ":"M","ğ":"N","ğ":"O","ğ":"P","ğ":"Q","ğ‘":"R","ğ’":"S","ğ“":"T","ğ”":"U","ğ•":"V","ğ–":"W","ğ—":"X","ğ˜":"Y","ğ™":"Z","ğ’‚":"a","ğ’ƒ":"b","ğ’„":"c","ğ’…":"d","ğ’†":"e","ğ’‡":"f","ğ’ˆ":"g","ğ’‰":"h","ğ’Š":"i","ğ’‹":"j","ğ’Œ":"k","ğ’":"l","ğ’":"m","ğ’":"n","ğ’":"o","ğ’‘":"p","ğ’’":"q","ğ’“":"r","ğ’”":"s","ğ’•":"t","ğ’–":"u","ğ’—":"v","ğ’˜":"w","ğ’™":"x","ğ’š":"y","ğ’›":"z","ğ‘¨":"A","ğ‘©":"B","ğ‘ª":"C","ğ‘«":"D","ğ‘¬":"E","ğ‘­":"F","ğ‘®":"G","ğ‘¯":"H","ğ‘°":"I","ğ‘±":"J","ğ‘²":"K","ğ‘³":"L","ğ‘´":"M","ğ‘µ":"N","ğ‘¶":"O","ğ‘·":"P","ğ‘¸":"Q","ğ‘¹":"R","ğ‘º":"S","ğ‘»":"T","ğ‘¼":"U","ğ‘½":"V","ğ‘¾":"W","ğ‘¿":"X","ğ’€":"Y","ğ’":"Z","ğŸ":"0","ğŸ":"1","ğŸ":"2","ğŸ‘":"3","ğŸ’":"4","ğŸ“":"5","ğŸ”":"6","ğŸ•":"7","ğŸ–":"8","ğŸ—":"9"};class i extends e{constructor(t){super(c,t);}replaceInDocument(){s.info("å¼€å§‹æ›¿æ¢èŠ±ä½“å­—ç¬¦...");const t=super.replaceInDocument();return 0===t?s.info("æœªå‘ç°éœ€è¦æ›¿æ¢çš„èŠ±ä½“å­—ç¬¦"):s.success(`æ›¿æ¢å®Œæˆï¼å…±æ›¿æ¢ ${t} ä¸ªå­—ç¬¦`),t}static create(t){return new i(t)}}const o=i.create(),u=r.create();t("æ›¿æ¢èŠ±ä½“å­—ç¬¦",()=>o.replaceInDocument()),t("æ›¿æ¢ä¸­æ—¥æ–‡æ‹¬å·",()=>u.replaceInDocument());

})();